"use strict";angular.module("paveApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","firebase","uuid","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.poster"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/record",{templateUrl:"views/record.html",controller:"RecordCtrl"}).when("/fidelityQuestionnaire",{templateUrl:"views/fidelityquestionnaire.html",controller:"FidelityquestionnaireCtrl"}).when("/pdr",{templateUrl:"views/pdr.html",controller:"PdrCtrl"}).when("/user",{templateUrl:"views/user.html",controller:"UserCtrl"}).when("/user/:userId",{templateUrl:"views/user.html",controller:"UserCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/users",{templateUrl:"views/users.html",controller:"UsersCtrl"}).when("/users/:userType",{templateUrl:"views/users.html",controller:"UsersCtrl"}).when("/sessions",{templateUrl:"views/sessions.html",controller:"SessionsCtrl"}).when("/sessions/:type/:userId",{templateUrl:"views/sessions.html",controller:"SessionsCtrl"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl"}).when("/history/:userId",{templateUrl:"views/history.html",controller:"HistoryCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$cookies",function(a,b){a.footer="Powered by CBITs",a.siteName="PAVE",a.appVersion="0.2.5",a.dataIO="https://pave.firebaseio.com",a.navItems=[{html:"Users",href:"#/users","class":"btn-primary",icon:"user"},{html:"Videos",href:"#/sessions","class":"btn-primary",icon:"facetime-video"},{html:"Encounters",href:"#/history","class":"btn-primary",icon:"eye-open"}],a.settingsItems=[{html:"Settings",href:"#/users","class":"btn-default"}],a.currentUser="1",a.userLoggedIn=function(){return"true"==b.userLoggedIn?!0:!1}}]),angular.module("paveApp").controller("MainCtrl",["$scope","$rootScope","Users",function(a,b,c){a.appVersion=b.appVersion,a.mainNavItems=b.mainNavItems,a.currentUser=c.get(b.currentUser),a.userLoggedIn=b.userLoggedIn}]),angular.module("paveApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("paveApp").controller("NavbarCtrl",["$scope","$rootScope","$location","$cookieStore",function(a,b,c,d){a.siteName=b.siteName,a.mainNavItems=b.mainNavItems,a.settingsItems=b.settingsItems,a.userExists=b.userExists,a.logout=function(){d.remove("userLoggedIn"),c.href("/")}}]),angular.module("paveApp").controller("FooterCtrl",["$scope","$rootScope",function(a,b){a.footer=b.footer,a.appVersion=b.appVersion}]),angular.module("paveApp").controller("UsersCtrl",["$scope","$routeParams","$filter","$sce","Users",function(a,b,c,d,e){a.subNavExists=!0,a.subNavItems=[{html:"Staff",userType:"staff",href:"#/users/staff","class":""},{html:"Clients",userType:"clients",href:"#/users/clients","class":""}],a.userType=b.userType||"staff",a.pageTitle=c("filter")(a.subNavItems,{userType:a.userType},!0)[0].html,a.users=function(){var b={};return b.clients=c("filter")(e.users,{isClient:!0},!0),b.administrators=c("filter")(e.users,{isAdmin:!0},!0),b.providers=c("filter")(e.users,{isProvider:!0},!0),b.PDRcallers=c("filter")(e.users,{isPDRcaller:!0},!0),b.supervisors=c("filter")(e.users,{isSupervisor:!0},!0),b.staff=c("filter")(e.users,{isClient:!1},!0),b[a.userType]},a.booleanFormatter=function(a){var b='<i class="glyphicon glyphicon-ok"></i>',c="",e="";return e=1==a?b:c,d.trustAsHtml(e)}}]),angular.module("paveApp").controller("SessionsCtrl",["$scope","$sce","$routeParams","$filter",function(a,b,c){a.subNavExists=!0,a.subNavItems=[{html:"Review",href:"#/sessions/review","class":""},{html:"Record",href:"#/sessions/record","class":""}],a.type=c.type,a.videogular={API:null,theme:"bower_components/videogular-themes-default/videogular.css",sources:[{src:b.trustAsResourceUrl("http://mohrlab.northwestern.edu/video/video.mp4"),type:"video/mp4"}]},a.videogular.onPlayerReady=function(b){a.videogular.API=b},a.videogular.onCompleteVideo=function(){a.showFreezeButton=!0,a.showPlayButton=!0},a.labels=["effort","small steps","relationship","humor","catch them being good"],a.timepoints=[],a.timepoint={},a.showFreezeButton=!0,a.showPlayButton=!0,a.freezeForTagging=function(){a.videogular.API.pause(),a.showFreezeButton=!1,a.timepoint={}},a.play=function(){a.videogular.API.play(),a.showPlayButton=!1},a.stop=function(){a.videogular.API.stop(),a.showPlayButton=!1},a.addTag=function(){var b={};b.time=a.videogular.API.currentTime,b.tag=a.timepoint.tag,b.notes=a.timepoint.notes,a.timepoints.push(b),a.videogular.API.play(),a.showFreezeButton=!0},a.jumpTo=function(b){a.videogular.API.seekTime(b),a.videogular.API.play()}}]),angular.module("paveApp").controller("SettingsCtrl",["$scope",function(a){a.alertMessage="",a.passwordReset=function(){a.alertMessage="Password reset email sent!"}}]),angular.module("paveApp").controller("HistoryCtrl",["$scope","$routeParams","$filter","$location","uuid4","Encounters","Users",function(a,b,c,d,e,f,g){a.type=b.type,a.userId=b.userId,a.date={date:null},a.client=g.get(a.userId),a.encounterTasks=f.tasks,a.encounters=f.get(a.userId),a.selectedTaskName="",a.selectedSessionNumber="",a.showModal=function(b,c){$(".modal").modal(),a.selectedTaskName=c,a.selectedSessionNumber=b},a.movedToHistory=function(){}}]),angular.module("paveApp").controller("LoginCtrl",["$scope","$rootScope","$cookies","login",function(a,b,c){a.submit=function(){c.userLoggedIn=!0,a.userLoggedIn=b.userLoggedIn}}]),angular.module("paveApp").controller("RecordCtrl",["$scope",function(){}]),angular.module("paveApp").service("Users",["$firebase","$rootScope","$filter",function(a,b,c){var d={},e=function(a,b,c){var d=a.length,e=0;for(e=0;d>e;e+=1)if(a[e][c]===b)return e;return"false"};return d.users=[{id:"1",username:"Lisa",firstName:"Lisa",lastName:"Saldana",email:"lisa@oslc.org",isAdmin:!0,isProvider:!0,isClient:!1,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""},{id:"2",username:"Mark",firstName:"Mark",lastName:"Begale",email:"m.begale@gmail.com",isAdmin:!0,isProvider:!0,isClient:!1,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""},{id:"3",username:"Baroness",firstName:"Baroness",lastName:"Schrader",email:"baroness@schrader.com",isAdmin:!0,isProvider:!0,isClient:!1,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""},{id:"4",username:"Maria",firstName:"Maria",lastName:"Von Trapp",email:"maria@vontrapp.org",isAdmin:!1,isProvider:!0,isClient:!1,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""},{id:"5",username:"Colonel",firstName:"Christopher",lastName:"Plummer",email:"plummer@vontrapp.org",isAdmin:!0,isProvider:!0,isClient:!1,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""},{id:"6",username:"Louisa",firstName:"Louisa",lastName:"Von Trapp",email:"louisa@vontrapp.org",isAdmin:!0,isProvider:!1,isClient:!1,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""},{id:"8",username:"Liesl",firstName:"Liesl",lastName:"Von Trapp",email:"Liesl@vontrapp.org",isAdmin:!1,isProvider:!1,isClient:!0,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""},{id:"9",username:"Kurt",firstName:"Kurt",lastName:"Von Trapp",email:"kurt@vontrapp.org",isAdmin:!1,isProvider:!1,isClient:!0,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""},{id:"10",username:"Marta",firstName:"Marta",lastName:"Von Trapp",email:"marta@vontrapp.org",isAdmin:!1,isProvider:!1,isClient:!0,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""},{id:"11",username:"Friedrich",firstName:"Freddy",lastName:"Plummer",email:"frierich@vontrapp.org",isAdmin:!1,isProvider:!1,isClient:!0,isPDRcaller:!1,isSupervisor:!1,createdAt:"",lastLogin:""}],d.upsert=function(a){var b=e(d.users,a.id,"id");if("false"!=b)for(var c in a)d.users[b][c]=a[c];else d.users.push(a)},d.get=function(a){return c("filter")(d.users,{id:a},!0)[0]},d}]),angular.module("paveApp").service("Encounters",function(){var a={};return a.numberOfEncounters=16,a.tasks=[{order:1,label:"Pre Visit Coaching",name:"preVisit"},{order:2,label:"Visitation",name:"visitation"},{order:3,label:"PDR Call",name:"pdr",questionnaire:"#/pdr"},{order:4,label:"Session Calls",name:"session"},{order:5,label:"Intermediary Contacts",name:"intermediary"},{order:6,label:"Fidelity Ratings",name:"fidelity",questionnaire:"#/fidelityQuestionnaire"}],a.contents=[],a.get=function(){var b=a.template();return b},a.template=function(){var b=[],c=1;for(c=0;c<=a.numberOfEncounters;c++)b.push({session:c,tasks:a.tasks});return b},a}),angular.module("paveApp").service("videos",function(){var a=new Firebase($rootScope.dataIO+"/videos"),b=$firebase(a),c=b.$asObject();c.$bindTo($scope,"data")}),angular.module("paveApp").service("surveys",function(){var a=new Firebase($rootScope.dataIO+"/surveys"),b=$firebase(a),c=b.$asObject();c.$bindTo($scope,"data")}),angular.module("paveApp").service("login",["$firebase","$rootScope",function(a,b){var c=new Firebase(b.dataIO);c.authWithPassword({email:"m.begale@gmail.com",password:"sLqPLhSLf8HKK6yc"},function(a,b){a?console.log("Login Failed!",a):console.log("Authenticated successfully with payload:",b)})}]),angular.module("paveApp").controller("FidelityquestionnaireCtrl",["$scope","$location",function(a,b){a.content=["Discussion included specific information on reinforcing parentsâ€™ efforts ","Discussion included reinforcing parent-child relationships","Discussion identified small steps case planners took or will take with families","Discussion included focus on small steps parents took or could take during the next week","Discussion included examples of supporting and encouraging parents","Discussion noted documenting parent accomplishments ","Solutions and strategies were	discussed in behavioral terms","Barriers to parental progress included discussion of how to help families overcome them"],a.process=["Parent and family strengths were used in case planning","The atmosphere of the meeting was friendly and supportive (e.g., supervisor smiles, uses humor)","Supervisor redirected conversation when necessary","Supervisor reinforced caseplanners for positive efforts with families","Supervisor managed the meeting time well, covered > 2 cases","Caseplanners were reinforced for small steps accomplished on their cases ","Supervisor ended group well (on time, encouraging statements)"],a.standardOptions=[{label:"Not at All",value:1},{label:"Hardly Ever",value:2},{label:"Somewhat",value:3},{label:"Mostly",value:4},{label:"Very Much",value:5}],a.submit=function(){b.href="#/history/review"}}]),angular.module("paveApp").controller("PdrCtrl",["$scope","$location",function(a){a.nextPage="#/history/review",a.issues=["Animal Cruelty","Arguing","Backtalking","Bedwetting","Complaining","Daydreaming","Defiance","Depression/Sadness","Destructiveness","Encopresis","Fearfulness","Fighting","Interrupting","Irritability","Jealousy","Lying","Nervous/Jittery","Notminding","Pant Wetting","Pouting","School Problems","Sexual Behaviors","Short Attention Span","Sleep Problems/Nightmares","Sluggishness","Stealing","Swearing","Teasing","Worried/Anxious","Biting","Hitting","Loudness","Waking at night","Crying","Hyperactivity","Repetitive Questions","Tantrums","Whining","Yelling"],a.feelings=["Stressed","Depressed","Positive","Hopeful","Overwhelmed"],a.submit=function(){window.location.href="#/history/review"},a.issueHappened=[],a.issueDistressLevel={},a.issueResponse={},a.issueHappenedToggle=function(b){var c=a.issueHappened.indexOf(b);c>-1?a.issueHappened.splice(c,1):a.issueHappened.push(b)},a.cravingsTrue=!1,a.distressScore=0,a.cravings=function(b){a.cravingsTrue=b}}]),angular.module("paveApp").service("tooltips",function(){var a={};return a.items=[],a.items.push({name:"Encounter",label:"encounter",definition:""}),a.items.push({name:"User",label:"encounter",definition:""}),a.items.push({name:"Video",label:"encounter",definition:""}),a}),angular.module("paveApp").controller("UserCtrl",["$scope","$routeParams","$filter","$location","Users","uuid4",function(a,b,c,d,e,f){a.userId=b.userId||null,a.user=e.get(a.userId)||{id:f.generate(),isAdmin:!1,isProvider:!1,isClient:!1,isPDRcaller:!1,isSupervisor:!1,supervisees:[],assignedClients:[],createdAt:new Date},a.alertMessage="",a.clients=c("filter")(e.users,{isClient:!0},!0),a.providers=c("filter")(e.users,{isProvider:!0},!0),a.saveUser=function(b){var c=b||"/users";0==a.user.isAdmin&&0==a.user.isProvider&&0==a.user.isClient&&0==a.user.isSupervisor&&0==a.user.isPDRcaller?a.alertMessage="You must select a role!":(e.upsert(a.user),d.url(c))}}]);